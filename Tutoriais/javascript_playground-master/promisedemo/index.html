<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
    
    function dodat(onsuccess, onerror) {
        const n = parseInt(Math.random()*1000)
        //success
        if (n % 2 == 0)
            setTimeout(() => onsuccess(n), 1000)
        else
            setTimeout(() => onerror(n), 1000)
    }


    function dodat2 () {

        return new Promise( (resolve, reject) => {

            const n = parseInt(Math.random()*1000)
            //success
            if (n % 2 == 0)
                setTimeout(() => resolve(n), 1000)
            else
                setTimeout(() => reject(n), 1000)


        })

    }

/*
    dodat2()
    .then(n => dodat2())
    .then(n => console.log(`second success baby! ${n}`))
    .catch(n => console.error(`ERROR! ${n}`))
    .finally(n => console.log("Finally I'm here..."))
*/

    async function executeDodat2(){

        try {
            const n = await dodat2()
            console.log(`SUCCESS A ${n}`)
            const n1 = await dodat2()
            console.log( `SECOND CALL MAN ${n1}`)
            const n2 = await dodat2()
            console.log( `THIRD CALL MAN ${n2}`)
        }
        catch(e){
            console.error(`FAILED ${e}`)
        }
        finally {
            console.log("FINALLY!")
        }
    }

    executeDodat2();
    </script>
</body>
</html>